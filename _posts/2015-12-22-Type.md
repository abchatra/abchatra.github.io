---
layout: post
title: Type (Blog in progress)
---

###Introduction
Javascript is an untyped language. [Type](https://github.com/Microsoft/ChakraCore/blob/master/lib/Runtime/Types/Type.h#L22) in the context of this blog refers to a datastructure in the runtime which holds additional information about an object. Type is also known as hidden class. Sole purpose of type in the runtime is to enhance performance of the user script code. If you are building your own javascript runtime and didn't care about performance or the memory you don't need type. 

#Type
Every [RecyclableObject](https://github.com/Microsoft/ChakraCore/blob/master/lib/Runtime/Types/RecyclableObject.h#L191) holds a pointer to a type. Every object class in Chakra inherits from RecyclableObject except [tagged floats](http://abchatra.github.io/TaggedFloat/). Example: `var a = "hello"`. Here `a` points to a literal string object which of [JavascriptString](https://github.com/Microsoft/ChakraCore/blob/master/lib/Runtime/Library/JavascriptString.h#L50) kind. JavascriptString inherits from RecycclableObject. 


###Type shares information
Take a simple example below.

```js
funcion Point(x, y)
{ 
  this.x = x;
  this.y = y;
}
var one = new Point(10,20);
var two = new Point(40,50);

print(one.x);
print(two.x);
```

Above example creates two *Points* each has properties x and y. Chakra needs to store following information in the runtime:

1.  Objects one and two have properites x and y
2.  Object one has property x whose value is 10 and property y whose value is 20
3.  Object two has property x whose value is 40 and property y whose value is 50

Above information needs to be retrieved when script wants to get or set the property the property. Typical way to store this information is in a form of a property map and a slot array.

- Property map (or type) maps between property and slot number. Example: Property x is present at slot 0. 
- Slot array stores the values. Example slots[0] contains value of property x. 

When script does *o.x*, Chakra fetches *o->type* map to figure out the slot number corresponding to x which is 0. Then it fetches *o->slots[0]* to get the value 10. 

Following diagram to illustrates the same. 

![Object Layout]({{ site.baseurl }}/images/2015-12-22-Type-ObjectLayout.png)

As you can see in the above type is common across all the objects created from constructor *Point*. This information is sharable. 




  


###Summary
